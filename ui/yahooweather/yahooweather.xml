<?xml version="1.0" encoding="utf-8"?>
<!--
	Created by ApplusForm.com on 2014.3.26

	Permission is granted to copy, distribute, modify under the terms of ApplusForm License.

	Copyright (C) 2014 ApplusForm.com. All rights reserved.
-->
<MOML version="1.1.5" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="http://www.applusform.com/xsd/moml_ui.xsd">
	<UILAYOUT portrait="300,300" landscape="300,300">
		<WINDOW id="icon" layout="50,0,200,200" />
		<LABEL id="temperature" layout="0,200,300,100" fontSize="100" textAlign="center"/>
	</UILAYOUT>
	<CMD cmd="function.updateByCountry" />
	<FUNCTION id="updateByCountry" >
		<CMD cmd="country = device.os.country"/>
		<CMD cmd="url = 'https://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20weather.forecast%20where%20woeid%20in%20(select%20woeid%20from%20geo.places(1)%20where%20text%3D%22' + country + '%22)%20and%20u%3D\'c\'&amp;format=xml&amp;env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys'" />
		<_CMD cmd="url = 'https://query.yahooapis.com/v1/public/yql?q=select * from weather.forecast where woeid in (select woeid from geo.places(1) where text=&quot;' + country + '&quot;) and u=\'c\'&amp;format=xml&amp;env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys'" />
		<CMD cmd="device.log(url)" />
		<CMD cmd="xml = file.read(url)" />
		<CMD cmd="device.log(xml)" />
		<CMD cmd="celsius = xpath.evaluateEx(xml, '/query/results/channel/item/yweather:condition/@temp')"/>
		<CMD cmd="temperature.text = celsius + ' °C'" />
		<CMD cmd="code = xpath.evaluateEx(xml, '/query/results/channel/item/yweather:condition/@code')"/>
		<CMD cmd="icon.img = 'http://l.yimg.com/a/i/us/we/52/' + code + '.gif'" />
	</FUNCTION>

</MOML>